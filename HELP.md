#SpringBoot+Redis 实现 API 接口防刷限流

###前言
在开发分布式高并发系统时有三把利器用来保护系统：缓存、降级、限流。

###缓存
缓存的目的是提升系统访问速度和增大系统处理容量

###降级
降级是当服务出现问题或者影响到核心流程时，需要暂时屏蔽掉，待高峰或者问题解决后再打开

###限流
限流的目的是通过对并发访问/请求进行限速，或者对一个时间窗口内的请求进行限速来保护系统，一旦达到限制速率则可以拒绝服务、排队或等待、降级等处理

这里主要讲的是api接口限流相关内容，虽然不是论述高并发概念中的限流， 不过道理都差不多。通过限流可以让系统维持在一个相对稳定的状态，为更多的客户提供服务。

限流的思路

1、 通过路径:ip的作为key，访问次数为value的方式对某一用户的某一请求进行唯一标识

2、 每次访问的时候判断key是否存在，是否count超过了限制的访问次数

3、 若访问超出限制，则应response返回msg:请求过于频繁给前端予以展示

API 接口的限流主要应用场景有：

1、 电商系统（特别是6.18、双11等）中的秒杀活动，使用限流防止使用软件恶意刷单；

2、 各种基础api接口限流：例如天气信息获取，IP对应城市接口，百度、腾讯等对外提供的基础接口，都是通过限流来实现免费与付费直接的转换。

3、 被各种系统广泛调用的api接口，严重消耗网络、内存等资源，需要合理限流。